<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- ä¿®å¤ï¼šä¼˜åŒ–ç§»åŠ¨ç«¯è§†å£é…ç½® -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ç”Ÿæ—¥è´ºå¡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "å¾®è½¯é›…é»‘", sans-serif;
            text-decoration: none !important;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #fef7fb, #fff5f7, #ffe5ec);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            /* ä¿®å¤ï¼šç§»åŠ¨ç«¯å–æ¶ˆoverflow:hiddenï¼Œé¿å…å†…å®¹æˆªæ–­ */
            overflow-x: hidden;
            overflow-y: auto;
            position: relative;
            /* ä¿®å¤ï¼šé€‚é…æ‰‹æœºå®‰å…¨åŒº */
            padding-bottom: env(safe-area-inset-bottom);
        }

        .confetti {
            position: absolute;
            opacity: 0;
            animation: fall linear infinite;
            z-index: 1;
        }
        .confetti.circle {
            width: 12px; height: 12px; border-radius: 50%;
        }
        .confetti.star {
            width: 14px; height: 14px;
            clip-path: polygon(50% 0%,61%35%,98%35%,68%57%,79%91%,50%70%,21%91%,32%57%,2%35%,39%35%);
        }

        .card {
            background: white;
            border-radius: 24px;
            padding: 45px 35px;
            box-shadow: 0 15px 35px rgba(255,107,129,0.12);
            text-align: center;
            z-index: 10;
            max-width: 520px;
            width: 100%;
            position: relative; /* ä¿®å¤ï¼šç§»åŠ¨ç«¯å–æ¶ˆabsoluteå®šä½ï¼Œé¿å…é”™ä½ */
            /* ä¿®å¤ï¼šé€‚é…å°å±å¹•æ‰‹æœº */
            margin: 20px auto;
        }

        .cake-box {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
        }
        .cake {
            font-size: clamp(60px, 20vw, 90px); /* ä¿®å¤ï¼šå“åº”å¼å­—ä½“å¤§å° */
            animation: floatCake 3.5s infinite ease-in-out;
        }

        .title {
            font-size: clamp(24px, 8vw, 36px); /* ä¿®å¤ï¼šå“åº”å¼å­—ä½“å¤§å° */
            margin-bottom: 15px;
            position: static !important;
        }
        .title::after {
            display: none !important;
        }

        .wish-text {
            font-size: clamp(16px, 5vw, 20px); /* ä¿®å¤ï¼šå“åº”å¼å­—ä½“å¤§å° */
            line-height: 1.8;
            color: #555;
            margin: 20px 0;
        }

        .back {
            display: inline-block;
            padding: 14px 32px;
            background: linear-gradient(90deg,#ff6b81,#ff4757);
            color: white;
            border-radius: 16px;
            text-decoration: none;
            margin-top: 20px;
            transition: all 0.3s ease;
            /* ä¿®å¤ï¼šé€‚é…æ‰‹æœºç‚¹å‡» */
            -webkit-tap-highlight-color: transparent;
        }
        .back:hover, .back:active { /* ä¿®å¤ï¼šæ·»åŠ ç§»åŠ¨ç«¯ç‚¹å‡»æ€ */
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(255,107,129,0.2);
        }

        /* ========== æ ¸å¿ƒä¿®æ”¹ï¼šæ–‡å­—æ¡†æ•´ä½“æ”¾å¤§ + ç§»åŠ¨ç«¯é€‚é… ========== */
        .float-box {
            position: absolute;
            padding: 18px 28px;
            background: rgba(255,255,255,0.92);
            border-radius: 16px;
            font-size: clamp(16px, 4vw, 20px); /* ä¿®å¤ï¼šå“åº”å¼å­—ä½“ */
            font-weight: 600;
            z-index: 2;
            white-space: nowrap;
            box-shadow: 0 6px 16px rgba(255,107,129,0.15);
            /* ä¿®å¤ï¼šé€‚é…æ‰‹æœºç‚¹å‡» */
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            transition: all 0.4s ease;
            border: 3px solid;
            animation: none !important;
            min-width: clamp(120px, 30vw, 160px); /* ä¿®å¤ï¼šå“åº”å¼æœ€å°å®½åº¦ */
        }

        .float-box:hover, .float-box:active { /* ä¿®å¤ï¼šæ·»åŠ ç§»åŠ¨ç«¯ç‚¹å‡»æ€ */
            transform: scale(1.08);
        }

        .float-box.active {
            padding: 28px 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
            z-index: 20;
            transform: scale(1.25);
            min-width: clamp(180px, 40vw, 240px); /* ä¿®å¤ï¼šå“åº”å¼æœ€å°å®½åº¦ */
            white-space: normal;
            text-align: center;
            border-radius: 20px;
            color: #FFFFFF !important;
            text-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .float-box .title {
            font-size: clamp(18px, 4.5vw, 22px); /* ä¿®å¤ï¼šå“åº”å¼å­—ä½“ */
            font-weight: 700;
            margin-bottom: 10px;
            color: inherit;
        }

        .float-box .msg {
            display: none;
            font-size: clamp(16px, 4vw, 20px); /* ä¿®å¤ï¼šå“åº”å¼å­—ä½“ */
            font-weight: 800;
            line-height: 1.7;
            opacity: 1;
            letter-spacing: 0.5px;
            color: #FFFFFF !important;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .float-box.active .msg {
            display: block;
        }

        @keyframes floatCake {
            0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)}
        }
        @keyframes fall {
            0%{transform:translateY(-10px);opacity:0}10%{opacity:1}100%{transform:translateY(100vh);opacity:0}
        }

        /* ä¿®å¤ï¼šç§»åŠ¨ç«¯ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½ */
        @media (max-width: 768px) {
            .float-box {
                /* æ‰‹æœºç«¯é™ä½åŠ¨ç”»å¤æ‚åº¦ */
                transition: all 0.2s ease;
            }
            .confetti {
                /* æ‰‹æœºç«¯å‡å°‘å½©å±‘æ•°é‡ */
                display: none; /* å¯é€‰ï¼šå¦‚æœæ‰‹æœºå¡é¡¿ï¼Œå¯æ³¨é‡Šæ‰è¿™è¡Œæ¢å¤å½©å±‘ */
            }
        }
    </style>
</head>

<body>
    <div id="wishArea"></div>
    <div id="confetti"></div>

    <div class="card" id="mainCard">
        <div class="cake-box">
            <div class="cake">ğŸ‚</div>
        </div>
        <h1 class="title">ç”Ÿæ—¥å¿«ä¹</h1>
        <p class="wish-text">æ„¿æ‰€æœ‰ç¾å¥½å¦‚çº¦è€Œè‡³<br>å¹³å®‰å–œä¹ ä¸‡äº‹èƒœæ„</p>
        <!-- ä¿®å¤ï¼šè¿”å›è·¯å¾„æ”¹ä¸ºç»å¯¹è·¯å¾„ï¼Œé€‚é…æ‰‹æœº -->
        <a href="https://huixie388.github.io/" class="back">â† è¿”å›é¦–é¡µ</a>
    </div>

    <script>
        const wishes = [
            { t: "æš´å¯ŒğŸ’°", m: "æ„¿ä½ è´¢æºæ»šæ»šï¼Œç”Ÿæ´»å¯Œè¶³", color: "#ff6b81" },
            { t: "å˜ç¾âœ¨", m: "æ„¿ä½ æ°¸è¿œè€€çœ¼ï¼Œæ¸©æŸ”åˆå¥½çœ‹", color: "#f97316" },
            { t: "å˜ç˜¦ğŸ”¥", m: "æ„¿ä½ èº«æè¶…æ£’ï¼Œè‡ªä¿¡å‘å…‰", color: "#8b5cf6" },
            { t: "å¹³å®‰å¥åº·", m: "æ„¿ä½ æ— ç—…æ— ç¾ï¼Œå²å²å¹³å®‰", color: "#3b82f6" },
            { t: "å¼€å¿ƒå¿«ä¹", m: "æ„¿ä½ æ¯å¤©éƒ½ç¬‘ï¼Œçƒ¦æ¼å…¨æ¶ˆ", color: "#10b981" },
            { t: "å­¦ä¸šè¿›æ­¥", m: "æ„¿ä½ é€¢è€ƒå¿…è¿‡ï¼Œå‰ç¨‹ä¼¼é”¦", color: "#f59e0b" },
            { t: "å·¥ä½œé¡ºåˆ©", m: "æ„¿ä½ èŒåœºé¡ºåˆ©ï¼Œå‡èŒåŠ è–ª", color: "#ec4899" },
            { t: "ä¸‡äº‹é¡ºæ„", m: "æ„¿ä½ äº‹äº‹é¡ºå¿ƒï¼Œæ‰€æ„¿çš†æˆ", color: "#6366f1" },
            { t: "æ°¸è¿œå¹¸ç¦", m: "æ„¿ä½ è¢«çˆ±åŒ…å›´ï¼Œç”œç”œèœœèœœ", color: "#84cc16" },
            { t: "å¿ƒæƒ³äº‹æˆ", m: "æ„¿ä½ æƒ³è¦çš„éƒ½èƒ½æ‹¥æœ‰", color: "#06b6d4" },
            { t: "å®¶äººå¹³å®‰", m: "æ„¿å®¶äººå®‰åº·ï¼Œå›¢åœ†å¹¸ç¦", color: "#d946ef" },
            { t: "å¥½è¿è¿è¿", m: "æ„¿ä½ é”¦é²¤é™„ä½“ï¼Œå¥½è¿ä¸æ–­", color: "#f87171" },
            { t: "æ— å¿§æ— è™‘", m: "æ„¿ä½ è‡ªåœ¨å¿«ä¹ï¼Œæ²¡æœ‰å¿§æ„", color: "#4ade80" },
            { t: "æš´å¯Œæš´ç¾", m: "æ„¿ä½ åˆç¾åˆæœ‰é’±ï¼Œäººç”Ÿå¼€æŒ‚", color: "#f43f5e" },
            { t: "è¢«çˆ±åŒ…å›´", m: "æ„¿ä½ æ°¸è¿œè¢«æ¸©æŸ”å’Œçˆ±åŒ…å›´", color: "#22d3ee" }
        ];

        const wishArea = document.getElementById("wishArea");
        const boxes = [];
        let canvasWidth = window.innerWidth;
        let canvasHeight = window.innerHeight;
        const bounce = 0.8;
        const mainCard = document.getElementById("mainCard");
        let cardBounds = {};

        class WishBox {
            constructor(data, index) {
                this.el = document.createElement("div");
                this.el.className = "float-box";
                this.el.innerHTML = `
                    <div class="title">${data.t}</div>
                    <div class="msg">${data.m}</div>
                `;
                this.el.style.color = data.color;
                this.el.style.borderColor = data.color;

                // åˆå§‹ä½ç½®é€‚é…å¤§å°ºå¯¸æ–‡å­—æ¡†ï¼Œé¿å¼€è´ºå¡ä¸­å¿ƒ
                do {
                    this.x = Math.random() * (canvasWidth - 300) + 150;
                    this.y = Math.random() * (canvasHeight - 300) + 150;
                } while (
                    Math.abs(this.x - canvasWidth/2) < cardBounds.width/2 &&
                    Math.abs(this.y - canvasHeight/2) < cardBounds.height/2
                );

                this.vx = (Math.random() - 0.5) * 0.7;
                this.vy = (Math.random() - 0.5) * 0.7;
                this.width = 0;
                this.height = 0;

                // ä¿®å¤ï¼šé€‚é…ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶
                this.el.addEventListener('click', () => this.toggleActive());
                this.el.addEventListener('touchstart', (e) => {
                    e.preventDefault(); // é˜»æ­¢é»˜è®¤è§¦æ‘¸è¡Œä¸º
                    this.toggleActive();
                });

                wishArea.appendChild(this.el);
                setTimeout(() => this.updateSize(), 0);
                this.updatePosition();
            }

            // ä¿®å¤ï¼šæå–æ¿€æ´»é€»è¾‘ï¼Œæ–¹ä¾¿å¤ç”¨
            toggleActive() {
                this.el.classList.toggle("active");
                if (this.el.classList.contains('active')) {
                    this.el.style.background = `linear-gradient(90deg, ${darkenColor(this.el.style.color, 15)}, ${this.el.style.color})`;
                } else {
                    this.el.style.background = "rgba(255,255,255,0.92)";
                }
                setTimeout(() => this.updateSize(), 100);
            }

            updateSize() {
                this.width = this.el.offsetWidth;
                this.height = this.el.offsetHeight;
            }

            updatePosition() {
                this.el.style.left = `${this.x - this.width/2}px`;
                this.el.style.top = `${this.y - this.height/2}px`;
            }

            checkCardCollision() {
                const boxLeft = this.x - this.width/2;
                const boxRight = this.x + this.width/2;
                const boxTop = this.y - this.height/2;
                const boxBottom = this.y + this.height/2;
                const cardLeft = cardBounds.left;
                const cardRight = cardBounds.right;
                const cardTop = cardBounds.top;
                const cardBottom = cardBounds.bottom;

                if (boxRight > cardLeft && boxLeft < cardLeft) {
                    this.x = cardLeft - this.width/2; 
                    this.vx = -this.vx * bounce;
                } else if (boxLeft < cardRight && boxRight > cardRight) {
                    this.x = cardRight + this.width/2; 
                    this.vx = -this.vx * bounce;
                }
                if (boxBottom > cardTop && boxTop < cardTop) {
                    this.y = cardTop - this.height/2; 
                    this.vy = -this.vy * bounce;
                } else if (boxTop < cardBottom && boxBottom > cardBottom) {
                    this.y = cardBottom + this.height/2; 
                    this.vy = -this.vy * bounce;
                }
            }

            update() {
                this.checkCardCollision();
                this.x += this.vx;
                this.y += this.vy;

                if (this.x - this.width/2 < 0) { 
                    this.x = this.width/2; 
                    this.vx *= -bounce; 
                }
                if (this.x + this.width/2 > canvasWidth) { 
                    this.x = canvasWidth - this.width/2; 
                    this.vx *= -bounce; 
                }
                if (this.y - this.height/2 < 0) { 
                    this.y = this.height/2; 
                    this.vy *= -bounce; 
                }
                if (this.y + this.height/2 > canvasHeight) { 
                    this.y = canvasHeight - this.height/2; 
                    this.vy *= -bounce; 
                }
                this.updatePosition();
            }

            checkCollision(other) {
                const dx = this.x - other.x;
                const dy = this.y - other.y;
                const dist = Math.hypot(dx, dy);
                const minDist = (this.width + other.width)/2;
                if (dist < minDist && dist > 0) {
                    const angle = Math.atan2(dy, dx);
                    const cos = Math.cos(angle);
                    const sin = Math.sin(angle);
                    const vx1 = this.vx * cos + this.vy * sin;
                    const vy1 = this.vy * cos - this.vx * sin;
                    const vx2 = other.vx * cos + other.vy * sin;
                    const vy2 = other.vy * cos - other.vx * sin;
                    this.vx = vx2 * cos - vy1 * sin;
                    this.vy = vy1 * cos + vx2 * sin;
                    other.vx = vx1 * cos - vy2 * sin;
                    other.vy = vy2 * cos + vx1 * sin;
                    const overlap = minDist - dist;
                    this.x += overlap * cos * 0.5;
                    this.y += overlap * sin * 0.5;
                    other.x -= overlap * cos * 0.5;
                    other.y -= overlap * sin * 0.5;
                }
            }
        }

        function darkenColor(color, percent) {
            // ä¿®å¤ï¼šå…¼å®¹æ— #çš„é¢œè‰²å€¼
            color = color.startsWith('#') ? color : '#' + color;
            const num = parseInt(color.replace("#",""),16);
            const amt = Math.round(2.55 * percent);
            const R = Math.max(0, (num >> 16) - amt);
            const G = Math.max(0, (num >> 8 & 0xFF) - amt);
            const B = Math.max(0, (num & 0xFF) - amt);
            return "#" + (R.toString(16).padStart(2,'0') + G.toString(16).padStart(2,'0') + B.toString(16).padStart(2,'0'));
        }

        function initCardBounds() {
            const r = mainCard.getBoundingClientRect();
            cardBounds = {left:r.left, right:r.right, top:r.top, bottom:r.bottom, width:r.width, height:r.height};
        }

        // ä¿®å¤ï¼šç­‰å¾…é¡µé¢åŠ è½½å®Œæˆå†åˆå§‹åŒ–
        window.addEventListener('load', () => {
            initCardBounds();
            wishes.forEach((item,i) => boxes.push(new WishBox(item,i)));

            function animate(){
                boxes.forEach(b => b.update());
                for(let i=0;i<boxes.length;i++) for(let j=i+1;j<boxes.length;j++) boxes[i].checkCollision(boxes[j]);
                requestAnimationFrame(animate);
            }
            animate();

            // ä¿®å¤ï¼šç§»åŠ¨ç«¯é™ä½å½©å±‘ç”Ÿæˆé¢‘ç‡ï¼Œå‡å°‘å¡é¡¿
            const confettiInterval = window.innerWidth < 768 ? 500 : 180;
            setInterval(()=>{
                const c = document.createElement("div");
                c.className = "confetti " + (Math.random()>.5?"circle":"star");
                c.style.left = Math.random()*100 + "vw";
                c.style.backgroundColor = ["#ff6b81","#f97316","#8b5cf6"][Math.floor(Math.random()*3)];
                c.style.animationDuration = Math.random()*4+4 + "s";
                confetti.appendChild(c);
                setTimeout(()=>c.remove(), 5000);
            }, confettiInterval);
        });

        window.addEventListener("resize", () => {
            canvasWidth = window.innerWidth;
            canvasHeight = window.innerHeight;
            initCardBounds();
            boxes.forEach(b=>{
                do{
                    b.x = Math.random()*(canvasWidth-300)+150;
                    b.y = Math.random()*(canvasHeight-300)+150;
                }while(Math.abs(b.x-canvasWidth/2)<cardBounds.width/2 && Math.abs(b.y-canvasHeight/2)<cardBounds.height/2);
                b.updatePosition();
            });
        });
    </script>
</body>
</html>
